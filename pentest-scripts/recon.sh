#!/bin/bash

# Ensure scans dir has been created
mkdir -p scans


/bin/bash execute_scan.sh $1

# Host web server with the nmap results
cd scans
echo Converting files to html for hosting
for FILE in $(ls)
do
	if [[ "$FILE" == *".xml"* ]]
	then
		echo goodfile
		xsltproc $FILE -o $FILE.html
	fi
done

echo Creating web index
echo "" > index.html
echo "<ul>" >> index.html
for FILE in $(ls)
do
	if [[ "$FILE" == *".html"*  ]] 
	then
		echo second good file
		echo "<li><a href='$FILE'>$FILE</a></li>" >> index.html
	fi
done
echo "</ul>" >> index.html
echo Hosting server with scan
/usr/bin/python3 -m http.server 8888
cd ..


